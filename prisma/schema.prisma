generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  schemas  = ["public", "auth"]
}

// Application User model - maps to public.users table
model User {
  id         BigInt   @id @default(autoincrement())
  created_at DateTime @default(now()) @db.Timestamptz(6)
  fullname   String?  @db.VarChar
  auth_id    String?  @unique @db.Uuid

  // Relationships
  tanks Tank[] // One user has many tanks

  @@map("users")
  @@schema("public")
}

// Fish model
model Fish {
  id         BigInt   @id @default(autoincrement())
  name       String
  species    String
  tank_id    BigInt?
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @updatedAt @db.Timestamptz(6)

  // Relationships
  tank Tank? @relation(fields: [tank_id], references: [id], onDelete: SetNull)

  @@map("fishes")
  @@schema("public")
}

// Tank model
model Tank {
  id         BigInt   @id @default(autoincrement())
  name       String
  width      Int
  height     Int
  length     Int
  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @updatedAt @db.Timestamptz(6)
  user_id    BigInt?

  // Relationships
  user   User?  @relation(fields: [user_id], references: [id], onDelete: Cascade)
  fishes Fish[] // One tank has many fishes

  @@map("tanks")
  @@schema("public")
}
